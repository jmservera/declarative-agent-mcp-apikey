{
    "$schema": "https://aka.ms/json-schemas/copilot-extensions/v2.1/plugin.schema.json",
    "schema_version": "v2.4",
    "name_for_human": "context7",
    "description_for_human": "context7${{APP_NAME_SUFFIX}}",
    "contact_email": "publisher-email@example.com",
    "namespace": "context7",
    "functions": [
        {
            "name": "get-library-docs",
            "description": "Fetches up-to-date documentation for a library. You must call 'resolve-library-id' first to obtain the exact Context7-compatible library ID required to use this tool, UNLESS the user explicitly provides a library ID in the format '/org/project' or '/org/project/version' in their query. Use mode='code' (default) for API references and code examples, or mode='info' for conceptual guides, narrative information, and architectural questions.",
            "parameters": {
                "type": "object",
                "properties": {
                    "context7CompatibleLibraryID": {
                        "type": "string",
                        "description": "Exact Context7-compatible library ID (e.g., '/mongodb/docs', '/vercel/next.js', '/supabase/supabase', '/vercel/next.js/v14.3.0-canary.87') retrieved from 'resolve-library-id' or directly from user query in the format '/org/project' or '/org/project/version'."
                    },
                    "mode": {
                        "type": "string",
                        "enum": [
                            "code",
                            "info"
                        ],
                        "default": "code",
                        "description": "Documentation mode: 'code' for API references and code examples (default), 'info' for conceptual guides, narrative information, and architectural questions."
                    },
                    "topic": {
                        "type": "string",
                        "description": "Topic to focus documentation on (e.g., 'hooks', 'routing')."
                    },
                    "page": {
                        "type": "integer",
                        "description": "Page number for pagination (start: 1, default: 1). If the context is not sufficient, try page=2, page=3, page=4, etc. with the same topic."
                    }
                },
                "required": [
                    "context7CompatibleLibraryID"
                ]
            }
        },
        {
            "name": "resolve-library-id",
            "description": "Resolves a package/product name to a Context7-compatible library ID and returns a list of matching libraries.\n\nYou MUST call this function before 'get-library-docs' to obtain a valid Context7-compatible library ID UNLESS the user explicitly provides a library ID in the format '/org/project' or '/org/project/version' in their query.\n\nSelection Process:\n1. Analyze the query to understand what library/package the user is looking for\n2. Return the most relevant match based on:\n- Name similarity to the query (exact matches prioritized)\n- Description relevance to the query's intent\n- Documentation coverage (prioritize libraries with higher Code Snippet counts)\n- Source reputation (consider libraries with High or Medium reputation more authoritative)\n- Benchmark Score: Quality indicator (100 is the highest score)\n\nResponse Format:\n- Return the selected library ID in a clearly marked section\n- Provide a brief explanation for why this library was chosen\n- If multiple good matches exist, acknowledge this but proceed with the most relevant one\n- If no good matches exist, clearly state this and suggest query refinements\n\nFor ambiguous queries, request clarification before proceeding with a best-guess match.",
            "parameters": {
                "type": "object",
                "properties": {
                    "libraryName": {
                        "type": "string",
                        "description": "Library name to search for and retrieve a Context7-compatible library ID."
                    }
                },
                "required": [
                    "libraryName"
                ]
            }
        }
    ],
    "runtimes": [        
        {
            "type": "RemoteMCPServer",
            "spec": {
                "url": "https://mcp.context7.com/mcp",
                "enable_dynamic_discovery": false
            },
            "run_for_functions": [
                "get-library-docs",
                "resolve-library-id"
            ],
            "auth": {
                "type": "ApiKeyPluginVault",
                "reference_id": "${{API_KEY_REGISTRATION_ID}}"                                
            }
        }
    ]
}
